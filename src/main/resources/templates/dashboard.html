<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/app.js"></script>
</head>
<body>
<h1>Dashboard</h1>
<button onclick="logout()">Logout</button>

<div id="user-actions" style="display:none;">
    <h2>User</h2>
    <a href="/create-ticket">Create Ticket</a>
    <a href="/tickets">My Tickets</a>
</div>

<div id="agent-actions" style="display:none;">
    <h2>Agent</h2>
    <a href="/tickets">Assigned Tickets</a>
</div>

<div id="admin-actions" style="display:none;">
    <h2>Admin</h2>
    <a href="/manage-users">Manage Users</a>
    <a href="/reassign-ticket">Reassign Tickets</a>
</div>

<script>
    async function loadDashboard() {
        const user = await apiRequest("/users/me");
        if (user.role === "USER") document.getElementById("user-actions").style.display = "block";
        if (user.role === "AGENT") document.getElementById("agent-actions").style.display = "block";
        if (user.role === "ADMIN") document.getElementById("admin-actions").style.display = "block";
    }
    window.onload = loadDashboard;
</script>
</body>
</html>
